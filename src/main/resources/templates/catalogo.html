<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoMisiones</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>

<body>

    <!-- Incluir el fragmento navbar -->
    <div th:insert="~{fragments/navbar :: navbar}"></div>

    <!-- Mostrar mensaje si la lista está vacía -->
    <div th:if="${categorias.empty}" class="alert alert-info" role="alert">
        No hay categorías registradas.
    </div>

    <div class="container mt-4" th:if="${!categorias.empty}">
        <h2 class="text-center mb-4">Selecciona una categoría o subcategoría:</h2>

        <div th:each="entry : ${categorias}">
            <!-- Categoría principal -->
            <div class="categoria mb-3">
                <h4 class="categoria-nombre text-primary" th:text="${entry.key.nombre}"></h4>

                <!-- Subcategorías -->
                <div class="subcategorias ms-4" th:each="subcategoria : ${entry.value}">
                    <div class="subcategoria mb-2">
                        <span th:text="'— ' + ${subcategoria.nombre}" class="me-2"></span>
                        <a class="btn btn-info btn-sm" th:href="@{'/producto/filtrar?categoria=' + ${subcategoria.id}}">Ver más</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="text-center mt-5 py-3 bg-light">
        <p>&copy; 2024 EcoMisiones. Todos los derechos reservados.</p>
    </footer>

    <!-- Incluir el fragmento de scripts -->
    <div th:insert="~{fragments/scripts :: scripts}"></div>

    <!-- Incluir Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
